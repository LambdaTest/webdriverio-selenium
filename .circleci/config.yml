version: 2.1

jobs:
  run-tests:
    docker:
      - image: cimg/node:18.20
    steps:
      - checkout

      - run:
          name: Show LambdaTest Credentials (For Debug Only)
          command: |
            echo "Username: $LT_USERNAME"
            echo "Access Key: $LT_ACCESS_KEY"

      - run:
          name: Install dependencies
          command: npm install

      - run:
          name: Run single test with env
          command: |
            export LT_USERNAME=$LT_USERNAME
            export LT_ACCESS_KEY=$LT_ACCESS_KEY
            npm run single

workflows:
  version: 2
  run-all:
    jobs:
      - run-tests
